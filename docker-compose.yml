version: "3"

services:
    
    authority.agent.api.de4a.eu:
        container_name: ${AUTHORITY_AGENT_API_CONTAINER_NAME}
        image: ${AUTHORITY_AGENT_API_IMAGE}:${AUTHORITY_AGENT_API_IMAGE_TAG}
        ports:
            - 0.0.0.0:${AUTHORITY_AGENT_API_PORT}:8080
        volumes:
            - ./out/artifacts/de4a_agent:/usr/local/tomcat/webapps
            - ./src/main/resources/web.xml:/usr/local/tomcat/conf/web.xml
            - ./src/main/resources/app.properties:/usr/local/tomcat/conf/app.properties  
        networks:
            - bdd_net

    mock.eportal.de4a.eu:
        container_name: ${EPORTAL_CONTAINER_NAME}
        image: ${EPORTAL_IMAGE}:${EPORTAL_IMAGE_TAG}
        ports:
            - 0.0.0.0:${EPORTAL_PORT}:8080
        volumes:
            - ../de4a-demo/mock-eprocedure-portal/target/mock-eprocedure-portal-0.0.1-SNAPSHOT.war:/usr/local/tomcat/webapps/ROOT.war
            - ../de4a-demo/mock-eprocedure-portal/src/main/resources/application.properties:/usr/local/tomcat/conf/application.properties
        networks:
            - bdd_net
   
volumes:
    db_data: {}

networks:
    bdd_net:

